(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{252:function(e,t,a){e.exports=a(435)},257:function(e,t,a){},258:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},259:function(e,t,a){},38:function(e,t,a){var n=a(261);n.initializeApp({apiKey:"AIzaSyBVvoERxcerBb6M4lh2C3D-rZeYIKZUvjw",authDomain:"react-game-78498.firebaseapp.com",databaseURL:"https://react-game-78498.firebaseio.com",projectId:"react-game-78498",storageBucket:"react-game-78498.appspot.com",messagingSenderId:"976787720562",appId:"1:976787720562:web:2371c16988082bed"});var r=n.database().ref();t.firebaseRef=r,t.pushToFirebase=function(e,t){console.log(e.query),r.child("todos").push().set(e.query.item),t.send("success")},t.createGame=function(e){return new Promise(function(t,a){return t(r.child("games").push({players:1,turn:0,users:{0:{name:e}},turnBased:!1},function(e){e&&a("error: "+e)}).key)})},t.createUser=function(e,t){var a="games/"+e;r.child(a+"/players").once("value").then(function(e){console.log(e.val());var n=e.val(),l=parseInt(n)+1;return r.child(a+"/players").set(l,function(e){if(e)return"error: "+e}),r.child(a+"/users/"+(l-1)).set({name:t},function(e){if(e)return"error: "+e}),""+(l-1)}).catch(function(e){console.error("Firebase error:",e.message)})},t.addWord=function(e,t,a){var n="games/"+e+"/story";r.child(n).push({value:a,user:t});var l="games/"+e+"/turn";return r.child(l).transaction(function(e){return e+1}),"success"},t.getGame=function(e){return new Promise(function(t,a){var r="games/"+e;n.database().ref(r).once("value").then(function(e){t(e.val())}).catch(function(e){console.error("Firebase error:",e.message),a(e)})})},t.changeTurnMode=function(e,t){var a="games/"+e+"/turnBased";return console.log(!t),r.child(a).set(!t),"success"}},427:function(e,t,a){},435:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(58),o=a.n(l),c=(a(257),a(258),a(259),a(260),a(44)),s=a(45),i=a(47),m=a(46),u=a(48),d=a(38),h=a(453),p=a(437),g=a(448),f=a(445),v=a(61),E=a(446),b=a(452),y=a(449),I=a(450),C=a(444),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).buildStory=function(e){if(e){for(var t="",a=0,n=Object.values(e);a<n.length;a++){t+=n[a].value+" "}return t}},a.addToStory=function(){console.log(a.props.gameId),Object(d.addWord)(a.props.gameId,a.props.name,a.state.currentInput),a.setState({currentInput:""})},a.handleInput=function(e,t){return a.setState({currentInput:t.value})},a.openModal=function(){return a.setState({modal:!0})},a.closeModal=function(){return a.setState({modal:!1})},a.calculateTurn=function(e){return console.log("player's turn: "+e.turn%e.players),e.users[e.turn%e.players].name},a.copyToClipboard=function(e){var t=document.createElement("textarea");t.value=e,t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),a.setState({message:"Copied to clipboard!"})},a.state={inverted:a.props.inverted,game:{},story:"",currentInput:"",modal:!1,currentTurn:""},a.creating=!1,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.firebaseRef.child("games").on("value",function(t){var a=t.val();console.log(a),console.log(e.props.gameId),console.log(a[e.props.gameId]);var n=a[e.props.gameId],r=e.buildStory(n.story),l=e.calculateTurn(n);e.setState({game:n,story:r,currentTurn:l},e.setStory)})}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.state.game.turnBased;return console.log(t),r.a.createElement(h.a,{inverted:this.props.inverted},r.a.createElement(p.a,{circular:!0,icon:"setting",floated:"right",onClick:this.openModal}),r.a.createElement("p",{style:{marginTop:"1em"}},this.state.story||r.a.createElement("span",{style:{color:"gray"}},"Enter a word to start the story off!")),r.a.createElement(g.a,null,r.a.createElement(g.a.Field,{fluid:!0},r.a.createElement(f.a,{placeholder:"Enter a word...",className:"margin",onChange:this.handleInput,value:this.state.currentInput})),r.a.createElement(p.a,{animated:!0,inverted:!0,color:"blue",onClick:this.addToStory,disabled:t&&this.state.currentTurn!==this.props.name},r.a.createElement(p.a.Content,{visible:!0},"Add"),r.a.createElement(p.a.Content,{hidden:!0},r.a.createElement(v.a,{name:"arrow right"})))),r.a.createElement(E.a,{hidden:!0}),r.a.createElement(h.a,{raised:!0},r.a.createElement(b.a,{columns:2,relaxed:"very"},r.a.createElement(b.a.Column,null,r.a.createElement("p",null,"Players: "),r.a.createElement("ul",null,this.state.game&&this.state.game.users?this.state.game.users.map(function(t,a){return r.a.createElement("li",{key:a},t.name===e.props.name?t.name+" (You)":t.name)}):r.a.createElement("li",null,"None")),t?r.a.createElement("p",{style:{color:"gray"}},"It is ",this.state.currentTurn,"'s turn"):r.a.createElement("span",null)),r.a.createElement(b.a.Column,null,r.a.createElement("p",null,"Game id:"),r.a.createElement("ul",null,r.a.createElement("li",null,this.props.gameId)),this.state.message&&r.a.createElement("p",{style:{color:"gray",fontSize:"18px"}},this.state.message),document.queryCommandSupported("copy")&&r.a.createElement(p.a,{basic:!0,color:"blue",onClick:function(){return e.copyToClipboard(e.props.gameId)}},r.a.createElement(p.a.Content,null,"Copy to Clipboard")),r.a.createElement("form",{style:{visibility:"hidden"}},r.a.createElement("textarea",{ref:function(t){return e.textArea=t},value:this.props.gameId})))),r.a.createElement(E.a,{vertical:!0,hidden:!0})),r.a.createElement(y.a,{open:this.state.modal,onClose:this.closeModal,dimmer:"inverted"},r.a.createElement(y.a.Header,null,"Settings"),r.a.createElement(y.a.Content,null,r.a.createElement(I.a,{trigger:r.a.createElement("span",{style:{marginRight:"2em",position:"relative",bottom:".25em"}},"Enforce turn-taking"),content:"When on, players must take turns typing in words.",basic:!0}),r.a.createElement(C.a,{toggle:!0,checked:t,onChange:function(){return Object(d.changeTurnMode)(e.props.gameId,t)}}),r.a.createElement(E.a,{hidden:!0}),r.a.createElement(p.a,{onClick:this.closeModal},"Ok"))))}}]),t}(n.Component),j=a(454),k=(a(427),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleGameId=function(e,t){return a.setState({gameId:t.value})},a.handleName=function(e,t){return a.setState({name:t.value})},a.submit=function(e){"create"==e?""!=a.state.name?a.props.setGameValues(a.state.gameId,a.state.name):alert("please enter your name"):"join"==e&&(""!=a.state.name&&""!=a.state.gameId?a.props.setGameValues(a.state.gameId,a.state.name):alert("Please enter a game id and your name"))},a.state={inverted:a.props.inverted,gameId:"",name:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{inverted:this.props.inverted},r.a.createElement(b.a,{columns:2,stackable:!0,textAlign:"center"},r.a.createElement(E.a,{vertical:!0,inverted:this.props.inverted},"Or"),r.a.createElement(b.a.Row,{verticalAlign:"middle"},r.a.createElement(b.a.Column,null,r.a.createElement(j.a,{icon:!0,inverted:this.props.inverted},r.a.createElement(v.a,{name:"search"}),"Join an Existing Game"),r.a.createElement(g.a,null,r.a.createElement(g.a.Field,{fluid:!0},r.a.createElement(f.a,{placeholder:"Enter game id",className:"margin",onChange:this.handleGameId,value:this.state.gameId})),r.a.createElement(g.a.Field,{fluid:!0},r.a.createElement(f.a,{placeholder:"Enter name",className:"margin",onChange:this.handleName})),r.a.createElement(p.a,{animated:!0,inverted:!0,color:"blue",onClick:function(){return e.submit("join")}},r.a.createElement(p.a.Content,{visible:!0},"Join"),r.a.createElement(p.a.Content,{hidden:!0},r.a.createElement(v.a,{name:"arrow right"}))))),r.a.createElement(b.a.Column,null,r.a.createElement(j.a,{icon:!0,inverted:this.props.inverted},r.a.createElement(v.a,{name:"world"}),"Create A New Game"),r.a.createElement(g.a,null,r.a.createElement(g.a.Field,{fluid:!0},r.a.createElement(f.a,{placeholder:"Enter name",className:"margin",onChange:this.handleName})),r.a.createElement(p.a,{animated:!0,inverted:!0,color:"blue",onClick:function(){return e.submit("create")}},r.a.createElement(p.a.Content,{visible:!0},"Create"),r.a.createElement(p.a.Content,{hidden:!0},r.a.createElement(v.a,{name:"arrow right"}))))))))}}]),t}(n.Component)),O=a(447),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).toggleTheme=function(){return a.setState(function(e){return{inverted:!e.inverted}})},a.setGameValues=function(e,t){return a.setState({gameIdUncleaned:e,name:t},a.getGameData)},a.setGameId=function(e){return a.setState({gameId:e})},a.getGameData=function(){d.firebaseRef.child("games").once("value",function(e){var t=e.val();console.log(t),null===t||null===a.state.gameIdUncleaned||null==t[a.state.gameIdUncleaned]?a.createNewGame():a.setState({gameId:a.state.gameIdUncleaned},function(){Object(d.createUser)(a.state.gameId,a.state.name)})})},a.createNewGame=function(){Object(d.createGame)(a.state.name).then(function(e){console.log("got game id: "+e),a.setState({gameId:e})}).catch(function(e){return console.log("error: "+e)})},a.state={inverted:!1,game:null,story:"",gameId:null,name:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log(this.state),r.a.createElement(O.a,null,r.a.createElement(b.a,{verticalAlign:"middle",columns:1,style:{minHeight:"70vh"}},r.a.createElement(b.a.Column,null,null===this.state.gameId?r.a.createElement(k,{inverted:this.state.inverted,setGameValues:this.setGameValues}):r.a.createElement(w,{inverted:this.state.inverted,gameId:this.state.gameId,name:this.state.name,setGameId:this.setGameId}),r.a.createElement(C.a,{toggle:!0,onChange:this.toggleTheme,label:"Dark Mode"}))))}}]),t}(n.Component),G=a(451),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).refreshPage=function(){return window.location.reload()},a.openModal=function(){return a.setState({modal:!0})},a.closeModal=function(){return a.setState({modal:!1})},a.state={inverted:!1,visible:!1,modal:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.state.visible;return r.a.createElement("div",null,r.a.createElement(G.a,{inverted:this.state.inverted,size:"massive"},r.a.createElement(G.a.Item,{name:"Story Mania",onClick:this.refreshPage}),r.a.createElement(G.a.Menu,{position:"right"},r.a.createElement(G.a.Item,{name:"About",onClick:this.openModal},r.a.createElement(v.a,{name:"info circle"})))),r.a.createElement(y.a,{open:this.state.modal,onClose:this.closeModal},r.a.createElement(y.a.Header,null,"About this game"),r.a.createElement(y.a.Content,null,r.a.createElement(y.a.Description,null,r.a.createElement(j.a,null,"Story Mania"),r.a.createElement("p",null,"An interactive multiplayer game where each person types in an extra word to form a story"),r.a.createElement("p",null,"More features/information coming soon!")))))}}]),t}(n.Component);var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,null),r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[252,1,2]]]);
//# sourceMappingURL=main.004b9d46.chunk.js.map